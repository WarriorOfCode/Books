<!DOCTYPE html>
<html>
	<head>
		<title> My settings </title>

		<% include includes/header.ejs %>


		<form name="outerForm" novalidate>
			<uib-tabset>
				<uib-tab heading="Личные данные">
					<ng-form name="formA" ng-controller="EditCtrl" class="form-horizontal">
						<div class="alert alert-success collapse" role="alert" ng-bind="message" ng-show="message"></div>
						<div class="alert alert-danger collapse" role="alert" ng-bind="message" ng-show="message &&error"></div>
						<div class="alert alert-danger collapse" role="alert" ng-bind="errorEmail" ng-show="errorEmail"></div>
						<div class="form-group down">
							<label class="col-sm-3 control-label">Your Name is:</label>
							<div class="col-sm-5">
								<input type="text" ng-model="user.name" class="form-control">
							</div>
						</div>

						<div class="form-group">
							<label class="col-sm-3 control-label">Your Lastname is: </label>
							<div class="col-sm-5">
								<input type="text" ng-model="user.lastName" class="form-control" >
							</div>
						</div>

						<div class="form-group" ng-class="{'has-error' : formA.email.$error.required || formA.email.$error.email}">
							<label class="col-sm-3 control-label">Your Email is: </label>
							<div class="col-sm-5">
								<input type="email" name="email" class="form-control" ng-model="user.email" required>
							</div>
						</div>

						<div class="form-group">
							<div class="col-sm-offset-3 col-sm-5">
								<button  ng-click="send()" class="btn btn-default">Save</button>
							</div>
						</div>						
					</ng-form>
				</uib-tab>

				<uib-tab heading="Изменить пароль">
					<ng-form ng-controller="PasswordCtrl" class="form-horizontal">

					<div ng-show="message">
						
					</div>
					<div class="alert alert-success collapse" role="alert" ng-bind="message" ng-show="message && !errorpassword"></div>
					<div class="alert alert-danger collapse" role="alert" ng-bind="message" ng-show="message &&errorpassword"></div>
					<div class="alert alert-danger collapse" role="alert" ng-bind="errorNewPassword" ng-show="errorNewPassword"></div>
						<div class="form-group down">
							<label class="col-sm-3 control-label">Your old password is:</label>
							<div class="col-sm-5">
								<input type="password" placeholder="old password" class="form-control" ng-model="password.old" required>
							</div>
						</div>

						<div class="form-group">
							<label class="col-sm-3 control-label">New password:</label>
							<div class="col-sm-5">
								<input type="password" minlength ="6" class="form-control" placeholder="new password" ng-model="password.new" required>
							</div>
						</div>
						

						<div class="form-group">
							<label class="col-sm-3 control-label">Repeat new password:</label>
							<div class="col-sm-5">
								<input type="password" minlength ="6" class="form-control" placeholder="repeat new password" ng-model="password.repeat" required>
							</div>
						</div>

						<div class="form-group">
							<div class="col-sm-offset-3 col-sm-5">
								<button ng-click="save()" class="btn btn-default">Update</button>
							</div>
						</div>
					</ng-form>
				</uib-tab>
			</uib-tabset>
		</form>

		<script>
			window.userDate = {
				name: "<%= data[0].Name %>", 
				lastName: "<%= data[0].LastName %>",
				email: "<%= data[0].Email %>",
				/*date: "<%= data[0].BirthData %>"*/
			};
		</script>
		
		<% include includes/scripts.ejs %>

		<script src="/js/edit.js"></script>
	</body>
</html>