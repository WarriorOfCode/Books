<!DOCTYPE html>
<html>
	<head>
		<title> My settings </title>

		<% include includes/header.ejs %>


		<form name="outerForm">
			<uib-tabset>
				<uib-tab heading="Личные данные">
					<ng-form name="formA" ng-controller="EditCtrl" class="form-horizontal">
			
						<div class="form-group">
							<label class="col-sm-3 control-label">Your Name is:</label>
							<div class="col-sm-5">
								<input type="text" ng-model="user.name" class="form-control" value="<%= data[0].Name %>">
							</div>
						</div>

						<div class="form-group">
							<label class="col-sm-3 control-label">Your Lastname is: </label>
							<div class="col-sm-5">
								<input type="text" ng-model="user.lastName"  class="form-control" value="<%= data[0].LastName %>">
							</div>
						</div>

						<div class="form-group" ng-class="{'has-error' : formA.email.$error.required || formA.email.$error.email}">
							<label class="col-sm-3 control-label">Your Email is: </label>
							<div class="col-sm-5">
								<input type="email" name="email" class="form-control" ng-model="user.email" value="<%= data[0].Email%>" required>
							</div>
						</div>

						<!-- The date of your birth is: <input type="date" ng-model="user.date" value="<%= data[0].BirthData %>"><br/> -->

						<div class="form-group">
							<div class="col-sm-offset-3 col-sm-5">
								<button  ng-click="send()" class="btn btn-default">Save</button>
							</div>
						</div>
						<span ng-bind="message"></span>
					</ng-form>
				</uib-tab>

				<uib-tab heading="Изменить пароль">
					<ng-form ng-controller="PasswordCtrl" class="form-horizontal">
						<div class="form-group">
							<label class="col-sm-3 control-label">Your old password is:</label>
							<div class="col-sm-5">
								<input type="password" placeholder="old password" class="form-control" ng-model="password.old" required>
							</div>
						</div>

						<div class="form-group">
							<label class="col-sm-3 control-label">New password:</label>
							<div class="col-sm-5">
								<input type="password" minlength ="6" class="form-control" placeholder="new password" ng-model="password.new" required>
							</div>
						</div>
						<span ng-bind="errorNewPassword"></span>

						<div class="form-group">
							<label class="col-sm-3 control-label">Repeat new password:</label>
							<div class="col-sm-5">
								<input type="password" minlength ="6" class="form-control" placeholder="repeat new password" ng-model="password.repeat" required>
							</div>
						</div>
						<span ng-bind="errorPassword"></span>


						<div class="form-group">
							<div class="col-sm-offset-3 col-sm-5">
								<button ng-click="save()" class="btn btn-default">Update</button>
							</div>
						</div>
						<span ng-bind="message"></span>
					</ng-form>
				</uib-tab>
			</uib-tabset>
		</form>

		<script>
			window.userDate = {
				name: "<%= data[0].Name %>", 
				lastName: "<%= data[0].LastName %>",
				email: "<%= data[0].Email %>",
				/*date: "<%= data[0].BirthData %>"*/
			};
		</script>
		
		<% include includes/scripts.ejs %>

		<script src="/js/edit.js"></script>
	</body>
</html>